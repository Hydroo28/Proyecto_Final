{% extends 'base.html' %}

{% block title %}Productos{% endblock %}

{% block content %}
    <h2>Catálogo de Productos</h2>
    <div>
        <table border="1">
            <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Categoría</th>
                <th>Stock</th>
                <th>Detalles</th>
            </tr>
            {% for producto in productos %}
            <tr>
                <td>
                    {% if producto.imagen %}
                        <img src="{{ producto.imagen }}" alt="Imagen de {{ producto.nombre }}" style="max-width:100px; max-height:100px;">
                    {% else %}
                        Sin imagen
                    {% endif %}
                </td>
                <td>{{ producto.nombre }}</td>
                <td>${{ producto.precio }}</td>
                <td>{{ producto.categoria }}</td>
                <td>
                    {% if producto.stock > 0 %}
                        {{ producto.stock }}
                    {% else %}
                        <strong>Agotado</strong>
                    {% endif %}
                </td>
                <td>
                    <a href="/producto/{{ producto.id }}">
                        <button class="boton-accion">Ver Detalles</button>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <p><strong>Total en stock:</strong> {{ total_stock }}</p>
    <div>
        <a href="/productos_nuevo">
            <button class="boton-accion">
                Añadir Productos
            </button>
        </a>
    </div>
{% endblock %}
